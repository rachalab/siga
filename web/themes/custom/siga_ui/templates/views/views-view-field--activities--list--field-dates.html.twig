<div class="date">
  {% set start_day = start_date|date('d') %}
  {% set end_day = end_date|date('d') %}
  {% set start_month = start_date|date('M')|upper %}
  {% set end_month = end_date|date('M')|upper %}
  {% set start_year = start_date|date('Y') %}
  {% set end_year = end_date|date('Y') %}

  {% if start_day == end_day and start_month == end_month and start_year == end_year %}
    {# Fecha única #}
    <span class="month">{{ start_month }}</span>
    <span class="day">{{ start_day }}</span>
    <span class="year">{{ start_year }}</span>
  {% elseif start_month == end_month and start_year == end_year %}
    {# Inicio y fin en el mismo mes #}
    <span class="month">{{ start_month }}</span>
    <span class="day">{{ start_day }}-{{ end_day }}</span>
    <span class="year">{{ start_year }}</span>
  {% elseif start_year == end_year %}
    {# Inicio y fin en diferentes meses pero mismo año #}
    <span class="month">{{ start_month }} - {{ end_month }}</span>
    <span class="day">{{ start_day }} {{ end_day }}</span>
    <span class="year">{{ start_year }}</span>
  {% else %}
    {# Inicio y fin en diferentes meses y años #}
    <span class="month">{{ start_month }} - {{ end_month }}</span>
    <span class="day">{{ start_day }} {{ end_day }}</span>
    <span class="year">{{ start_year }} - {{ end_year }}</span>
  {% endif %}
</div>
